<template name='dashboard'>
    {{#if currentUser }}
      {{> profile}}
    {{else}}
      {{> hey}}
    {{/if}}
</template>

<template name='loading'>
  {{> spinner}}
</template> 

<template name='profile'>
  <div class='content'>
    <div class='row m-t-xs'>
      <div class='col-md-3'>
        {{#if currentUser}}
        {{else}}
        <div id='signMeUp' class="hpanel hbggreen contact-panel" >
            <div class="panel-body text-center">
                <h3 class='font-light'>Login with Instagram</h3>
            </div>
        </div>               
        {{/if}}
        {{> myStats}}
        {{#if growth}}
          {{> valueGrowth}}      
          {{> followerGrowth}}   
          {{> engagementGrowth}} 
        {{/if}}
      </div>
      <div class='col-md-6'> 
        <div class='row'>
            {{#if thisUser}}
                {{> chats}}
            {{else}}
              <div class='hpanel hblue'>
                  <div class='panel-body'>
                      {{> explore}}
                      <h5 class='m-t-lg'>Search<small> by handle or location</small></h5> 
                      <br>                       
                       {{> tabular table=TabularTables.Users selector=selector }}
                  </div> 
              </div>
            {{/if}}
        </div> 
      </div>
      <div class='col-md-3'>
        {{> analytics}}
      </div>
    </div> 
  </div>   
</template>

<template name='timeChart'>
  <div class="hpanel">
      <div class="panel-body">
        <div class="stats-title pull-left">
          <h4><a href="/faq">Growth <i class="fa fa-question-circle"></i></a></h4>
        </div>
          <div class="pull-right">
            <button id='value' class="btn btn-success btn-sm graph-btn"> Value </button>
              <button id='followers' class="btn btn-success btn-sm btn-outline graph-btn"> Followers</button>
              <button id='engagement' class="btn btn-success btn-sm btn-outline graph-btn"> Engagement</button>
              
          </div>
          <div class="m-t-md">
              <canvas id="lineOptions" height="60"></canvas>
          </div>
      </div>
  </div>
</template>

<template name='requests'>
<div class='hpanel hblue'>
    <div class='panel-body'>
      <h5><a href="/faq">Requests <i class="fa fa-question-circle"></i></a></h5>
      <br>
      {{#if noRequests}}
        <p>You have 0 chat requests. No big deal, just search and request a chat from someone else.</p>
        <p><a href="/search"><button class='btn btn-success btn-outline'>Search</button></a></p>
      {{/if}}
    <div class='row'>
    {{#each requests}}
      <div class='col-lg-12'>
        {{> request}}
      </div>
    {{/each}}
    </div>
  </div>
</div>  
</template>  

<template name='request'>
  <div class="hpanel {{panelColor}}">  
      <div class="panel-body" style='padding: 5px 5px 7px 5px;'>
          <div class="media">
              <div class="media-image pull-left">
                  <a href="/{{id}}"><img class='profileImg' src="{{this.send.profile.profile_picture}}" alt="profile-picture"></a>
              </div>
              <div class="media-body text-left">
                  <div class='row'>
                      <div class='col-lg-7 col-md-12 col-sm-12'>
                          <a href="{{id}}">
                              <h5 style='line-height: 25px;'>
                                  <span class='text-success'>${{value}}</span>
                                  {{#if online}}
                                  <span class='label label-success' style='position: relative; bottom: 3px;'>Online</span>
                                  {{else}}
                                  <span class='label backRed' style='position: relative; bottom: 3px;'>Offline</span>
                                  {{/if}}
                                  <strong>@{{handle}}</strong>
                                  {{#if userInfo}}
                                      <small>{{user.city}}, {{user.country}}</small>
                                  {{/if}}
                              </h5>
                          </a>
                      </div>
                      <div class='col-lg-5 col-md-12 col-sm-12' style='line-height: 35px;'>
                          <div class='pull-right'>
                          {{#if currentUser}}    
                              {{#if thisUser}}
                              <button id='reject' class='btn btn-success btn-sm reject btn-outline'>Reject</button>
                              <button id='accept' class='btn btn-success btn-sm accept'>Accept</button>
                              {{/if}}
                          {{else}}
                              <a href="{{id}}"><button class='btn btn-success btn-sm'>View Profile</button></a>
                          {{/if}}
                          </div>
                      </div>
                  </div>
              </div> 
          </div>
      </div>
  </div>  
</template>  

<template name='chats'>
  {{#panel panelClass="stats tour5" color="hblue"}}
      <div class="stats-title">
        <h4><a href="/faq">Chats <i class="fa fa-question-circle"></i></a></h4>
        <br>
        {{#if chatCount}}
        <p>You have 0 chats. You know what to do. </p>
        {{/if}}
      </div>
      <div class='row'>
        {{#if currentUser}}
          {{#each chats}}
          <div class='col-lg-6'>
            {{> chat}}
          </div>
          {{/each}} 
        {{else}}
            <p> No chats yet. Sign up to chat with other Instagrammers.</p> 
        {{/if}}         
      </div>
  {{/panel}}    
</template>  

<template name='chat'>
  <div class="hpanel hblue">
      <div class="panel-body">
          <div class="media social-profile clearfix">
              <a class="pull-left">
                  <img src="{{thisUser.profile.profile_picture}}" class='profileImg' alt="profile-picture">
              </a>
              <button class='pull-right btn btn-danger btn-xs stopChat' style='min-width: 50px;'>Stop Chat</button>
              <div class="media-body">
                  <a href="/{{thisUser.profile.username}}"><h5>@{{thisUser.profile.username}}</h5></a>
                  <small class="text-muted">{{time}}</small>
              </div>
          </div>

          <div class="social-content m-t-md">
              {{thisUser.profile.bio}}
          </div>
      </div>
      <div class="panel-footer" >
        <div class="social-form clearfix m-b-sm">
              <input style='width: 77%; float: left; margin-right: 5px;' class="form-control sendChat" placeholder="Your message">
              <button style='min-width: 0px; min-width: 0px; height: 33px;' class='btn btn-success btn-sm sendbtn'>Send</button>
        </div>
        <div  style='max-height: 200px; overflow: scroll;'>
        {{#each messages}}
          <div class="social-talk">
              <div class="media social-profile clearfix">
                  <a class="pull-left">
                      <img src="{{user.profile.profile_picture}}" alt="profile-picture">
                  </a>
                  <div class="media-body">
                      <span class="font-bold">{{user.profile.username}}</span>
                      <small class="text-muted">{{ago}}</small>
                      <div class="social-content">
                          {{text}}
                      </div>
                  </div>
              </div>
          </div>
        {{/each}}
        </div>
      </div>
  </div>  
</template>  

<template name='myStats'>
      <div class="hpanel {{panelColor}}">
          <div class="panel-body tour1">
              <div class="pull-right text-right">
                <small>Your Instagram is worth</small>
                <h1 class='font-extra-bold text-success value-text'>${{user.data.postValue}}</h1>
                <small><a href="/faq">per post <i class="fa fa-question-circle"></i></a></small>
    
              </div>
              <img alt="logo" height='100' width='100' class="img-circle m-b" src="{{user.profile_picture}}">
              <h5><span class='label {{backColor}}'>{{type}}</span></h5>
              <h5><small>Joined {{joined}}</small></h5>
              <h3><a href="">@{{user.username}}</a></h3>
              <div class="text-muted font-bold m-b-xs"></div>
              <p>
                 {{user.bio}}
              </p> 
              <p>
                {{#each user.other.categories}}
                  <strong>#{{this}} </strong>
                {{/each}}
              </p>
              {{#if thisUser}}
              <p><a href="/edit"><button class='btn btn-success btn-sm'>Update your profile</button></a></p>
              {{else}}
                {{#if showRequest}}
                <p><button id='requestChat' class='btn btn-success btn-sm'>Chat with @{{user.username}}</button></p>
                {{/if}}
              {{/if}}
          </div>
          <div class="panel-body tour7">
            <p>{{user.other.city}}, {{user.other.country}}</p>
          </div>
          <div class="panel-footer contact-footer">
              <div class="row tour2">
                  <div class="col-md-4 border-right">
                      <div class="contact-stat"><span>Posts: </span> <strong>{{user.stats.media}}</strong></div>
                  </div>
                  <div class="col-md-4 border-right">
                      <div class="contact-stat"><span>Followers: </span> <strong>{{user.stats.followed_by}}</strong></div>
                  </div>
                  <div class="col-md-4">
                      <div class="contact-stat"><span>Following: </span> <strong>{{user.stats.follows}}</strong></div>
                  </div>
              </div>
          </div>
      </div>            
</template> 

<template name='engagementGrowth'>
    <div class='hpanel {{panelColor}} stats'>
      {{#panel}}
      <div class="stats-title pull-left">
          <h4><a href="/faq">Engagement Growth <i class="fa fa-question-circle"></i></a></h4>
      </div>
      <div class="stats-icon pull-right {{textColor}}">
          <i class="pe-7s-gleam fa-4x"></i>
      </div>
      <div class="clearfix"></div>
      <div class="flot-chart">
          <div class="flot-chart-content" id="engagement-chart"></div>
      </div>
      <div class="m-t-xs">
          <div class="row">
              <div class="col-xs-5">
                  <small class="stat-label">Today</small>
                  <h4>{{today}}</h4>
              </div>
              <div class="col-xs-7">
                  <small class="stat-label">Last week</small>
                  <h4>
                    {{lastWeek}} <i class="fa fa-level-up text-success"></i><small> {{increase}}% increase</small>
                  </h4>
              </div>
          </div>
      </div>
      {{/panel}}
  </div>  
</template>

<template name='followerGrowth'>
  <div class='hpanel {{panelColor}} stats'>
  {{#panel}}
      <div class="stats-title pull-left">
          <h4><a href="/faq">Follower Growth <i class="fa fa-question-circle"></i></a></h4>
      </div>
      <div class="stats-icon pull-right {{textColor}}">
          <i class="pe-7s-look fa-4x"></i>
      </div>
      <div class="clearfix"></div>
      <div class="flot-chart">
          <div class="flot-chart-content" id="follower-chart"></div>
      </div>
      <div class="m-t-xs">
          <div class="row">
              <div class="col-xs-5">
                  <small class="stat-label">Today</small>
                  <h4>{{today}}</h4>
              </div>
              <div class="col-xs-7">
                  <small class="stat-label">Last week</small>
                  <h4>
                    {{lastWeek}} <i class="fa fa-level-up text-success"></i><small> {{increase}}% increase</small>
                  </h4>
              </div>
          </div>
      </div>
  {{/panel}} 
  </div> 
</template> 

<template name='valueGrowth'>
  <div class='hpanel {{panelColor}} stats'>
  {{#panel }}
      <div class="stats-title pull-left">
          <h4><a href="/faq">Value Growth <i class="fa fa-question-circle"></i></a></h4>
      </div>
      <div class="stats-icon pull-right {{textColor}}">
          <i class="pe-7s-medal fa-4x"></i>
      </div>
      <div class="clearfix"></div>
      <div class="flot-chart">
          <div class="flot-chart-content" id="value-chart"></div>
      </div>
      <div class="m-t-xs">
          <div class="row">
              <div class="col-xs-5">
                  <small class="stat-label">Today</small>
                  <h4>{{today}}</h4>
              </div>
              <div class="col-xs-7">
                  <small class="stat-label">Last week</small>
                  <h4>
                    {{lastWeek}} <i class="fa fa-level-up text-success"></i><small> {{increase}}% increase</small>
                  </h4>
              </div>
          </div>
      </div>
  {{/panel}} 
  </div> 
</template>    

<template name='analytics'>
  <div class="hpanel {{panelColor}}">
    {{#panel}}
        <div class="row">
            <div class="col-md-12">
                <div class="text-center small">
                    <i class="fa fa-laptop"></i> data taken from last 20 posts
                </div>
                <div class="flot-chart" style="height: 160px">
                    <div class="flot-chart-content" id="flot-line-chart"></div>
                </div>
            </div>
        </div> 
        <div class='row'>   
              <div class="col-sm-6 text-center">
                <div>
                    <h1 class="{{textColor}}"><i class="fa fa-heart-o"></i></h1>
                    <h1 class="{{textColor}}">
                        {{user.data.avgLikes}}
                    </h1>
                    <small><a href="/faq">Expected likes <i class="fa fa-question-circle"></i></a></small>
                    <h4 class='{{textColor}}'> {{user.data.likesConsist}} <small>SD</small></h4>
                </div>
            </div>
            <div class="col-sm-6 text-center">
                <div>
                  <h1 class="{{textColor}}"><i class="fa fa-comment-o"></i></h1>
                  <h1 class="{{textColor}}">
                      {{user.data.avgComments}}
                  </h1>
                  <small><a href="/faq">Expected comments <i class="fa fa-question-circle"></i></a></small>
                  <h4 class="{{textColor}}">
                     {{user.data.commentsConsist}} <small>SD</small>
                  </h4>
                </div>
            </div>
            {{> gallery}}
        </div> 
    {{/panel}}
  </div>
</template>   

<template name='gallery'>
  <div class="lightBoxGallery">
    {{#each posts}}
      <div class='galleryItem'>
        <div class='gImage'>
            <a href="{{images.standard_resolution.url}}" title="{{caption.text}}" data-gallery=""><img src="{{images.thumbnail.url}}"></a>
        </div>
        <div class='gOverlay {{backColor}}'>
          <i class="fa fa-heart"></i> {{likes.count}}  &nbsp; <i class="fa fa-comment"></i>  {{comments.count}} 
        </div>
      </div> 
    {{/each}}
    <div id="blueimp-gallery" class="blueimp-gallery">
        <div class="slides"></div>
        <h3 class="title"></h3>
        <a class="prev">‹</a>
        <a class="next">›</a>
        <a class="close">×</a>
        <a class="play-pause"></a>
        <ol class="indicator"></ol>
    </div>
  </div>
</template> 