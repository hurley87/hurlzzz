<template name='dashboard'>
    {{#if currentUser }}
      {{> profile}}
    {{else}}
      {{> hey}}
    {{/if}}
</template>

<template name='loading'>
  <h1>loading</h1>
  {{> spinner}}
</template> 

<template name='profile'>
  <div class='content'>
    <div class='row'>
      <div class='col-lg-4'>
        {{> myStats}}
      </div>
      <div class='col-lg-8'>
        {{> tour}}
        {{> analytics}}
        {{> gallery}}
      </div>
    </div>  
  </div>
</template>

<template name='tour'>
  <div class='col-lg-12'>
    {{#panel title="Take the tour!"}}
      <p>
        You can learn a lot from a person when you look at their Instagram account. Just from looking at yours I can see your pretty cool. I don't want to overwhelm you right now with how action packed your profile is, so I created this tour to walk you through it.
      </p>
      <button id='startTour' class='btn btn-success'> Start tour </button>
    {{/panel}}
  </div>
</template> 

<template name='myStats'>
      <div class="hpanel hblue">
          <div class="panel-body tour1">
              <div class="pull-right text-right">
                <small>Your Instagram is worth</small>
                <h1 class='font-extra-bold text-success value-text'>${{user.profile.data.postValue}}</h1>
                <small><a href="/faq">per post <i class="fa fa-question-circle"></i></a></small>
    
              </div>
              <img alt="logo" class="img-circle m-b" src="{{user.profile.profile_picture}}">
              <h3><a href="">{{user.profile.full_name}}</a></h3>
              <div class="text-muted font-bold m-b-xs"></div>
              <p>
                 {{user.profile.bio}}
              </p>
          </div>
          <div class="panel-body tour7">
            {{> myStatsForm}}
          </div>
          <div class="panel-footer contact-footer">
              <div class="row tour2">
                  <div class="col-md-4 border-right">
                      <div class="contact-stat"><span>Posts: </span> <strong>{{user.profile.stats.media}}</strong></div>
                  </div>
                  <div class="col-md-4 border-right">
                      <div class="contact-stat"><span>Followers: </span> <strong>{{user.profile.stats.followed_by}}</strong></div>
                  </div>
                  <div class="col-md-4">
                      <div class="contact-stat"><span>Following: </span> <strong>{{user.profile.stats.follows}}</strong></div>
                  </div>
              </div>
          </div>

      </div>
</template>

<template name='myStatsForm'>
    {{#if finishedProfile}}
      <h3>Update Profile</h3>
      {{> form}}
      <button id='updateProfile' type="button" class="btn btn-success m-b-sm m-t-sm">
        Update Profile
      </button>
    {{else}}
    <div class="progress m-t-xs full">
      <div id='progressbar' style="width: 50%" aria-valuemax="100" aria-valuemin="0" aria-valuenow="80" role="progressbar" class="progress-bar progress-bar-success">
          50%
      </div>
    </div>
    <div class='welcome1'>
      <h3>
          Halfway there!
      </h3>
      <p>Complete your profile to see where you rank on the leaderboard.</p>
    </div>
    {{> form}}
    <div class='welcome2 hide'>
      <h3>
          Your awesome!
      </h3>
      <p>Press the Update Profile button to see where you rank.</p>
      <button id='updateProfile' type="button" class="btn btn-success m-b-sm m-t-sm">
        Update Profile
      </button>
    </div>
    {{/if}}
</template>  

<template name='form'>
  <div id='formTour'>
    <dl>
      <hr>
      <dt class='.m-t-md'>City</dt>
      <dd class='.m-b-md'>
        <a href="#" id="city" data-type="text" data-pk="1" data-placement="top"
                               data-placeholder="Required" 
                               data-title="Enter your City"
                               class="editable editable-click editable-empty"><h4>{{city}} <sup><i class="fa fa-pencil-square-o"></i></sup></h4></a>
      </dd>
      <hr>
      <dt class='.m-t-md'>Country</dt>
      <dd>
        <a href="#" id="country" data-type="text" data-pk="1" data-placement="top"
                               data-placeholder="Required" 
                               data-title="Enter your Country"
                               class="editable editable-click editable-empty"><h4>{{country}} <sup><i class="fa fa-pencil-square-o"></i></sup></h4></a>
      </dd> 
      <hr>     
      <dt class='.m-t-md'>Gender</dt>
      <dd><a href="#" id="sex" data-type="select" data-pk="1" data-value="" data-placement="top"
                                           data-title="Select sex" class="editable editable-click" style="color: gray;"><h4>{{gender}} <sup><i class="fa fa-pencil-square-o"></i></sup></h4></a>
      </dd>
      <hr>
      <dt class='.m-t-md'>Birthday</dt>
      <dd><a href="#" id="birthdate" data-type="combodate" data-value="1984-05-15" data-placement="top"
                                           data-format="YYYY-MM-DD" data-viewformat="DD/MM/YYYY"
                                           data-template="D / MMM / YYYY" data-pk="1" data-title="Select Date of Birth"
                                           class="editable editable-click"><h4>{{age}} <sup><i class="fa fa-pencil-square-o"></i></sup></h4></a>
      </dd>
      <hr>
      <dt class='.m-t-md'>Email</dt>
      <dd>
        <p><a href="#" id="email" data-type="text" data-pk="1" data-placement="top"
                               data-placeholder="Required" 
                               data-title="Enter your Email"
                               class="editable editable-click editable-empty"><h4>{{email}} <sup><i class="fa fa-pencil-square-o"></i></sup></h4></a></p>
      </dd>
      <hr>      
    </dl>
  </div>
</template> 

<template name='analytics'>
    <div class="col-lg-6">

        {{#panel panelClass="stats tour6"  color="hblue"}}
            <div class="stats-title pull-left">
                <h4><a href="/faq">Impression Value <i class="fa fa-question-circle"></i></a></h4>
            </div>
            <div class="stats-icon pull-right textOrange">
                <i class="pe-7s-look fa-4x"></i>
            </div>
            <div class="m-t-xl">
                <h1 class="textOrange">${{user.profile.data.impressionValue}}</h1>
            </div> 
        {{/panel}}

    </div>
    <div class="col-lg-6">

        {{#panel panelClass="stats tour5" color="hblue"}}
            <div class="stats-title pull-left">
                <h4><a href="/faq">Engagement Value <i class="fa fa-question-circle"></i></a></h4>
            </div>
            <div class="stats-icon pull-right textYellow">
                <i class="pe-7s-gleam fa-4x"></i>
            </div>
            <div class="m-t-xl">
                <h1 class="textYellow">${{user.profile.data.engagementValue}}</h1>
            </div> 
        {{/panel}}

    </div>
    <div class="col-lg-12">
      <div class="hpanel hblue tour4">
        {{#panel footerRight="Last update: 21.05.2015" }}
            <div class="row">
                <div class="col-md-3 text-center">
                    <div>
                        <h1 class="m-t-lg redText"><i class="fa fa-heart-o"></i></h1>
                        <h1 class="redText">
                            {{avgLikes}}
                        </h1>
                        <small><a href="/faq">Average likes / post <i class="fa fa-question-circle"></i></a></small>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="text-center small">
                        <i class="fa fa-laptop"></i> data taken from last 20 posts
                    </div>
                    <div class="flot-chart" style="height: 160px">
                        <div class="flot-chart-content" id="flot-line-chart"></div>
                    </div>
                </div>
                <div class="col-md-3 text-center">
                    <div>
                      <h1 class="m-t-lg redText"><i class="fa fa-comment-o"></i></h1>
                      <h1 class="redText">
                          {{avgComments}} 
                      </h1>
                      <small><a href="/faq">Average comments / post <i class="fa fa-question-circle"></i></a></small>
                    </div>
                </div>
            </div> 
        {{/panel}}
      </div>
    </div>
</template>   

<template name='gallery'>
  <div class='col-lg-12'>
    <div class="hpanel hblue">
        <div class="panel-body tour3">
          <div class="lightBoxGallery">
              {{#each posts}}
                <div class='galleryItem'>
                  <div class='gImage'>
                      <a href="{{images.standard_resolution.url}}" title="{{caption.text}}" data-gallery=""><img src="{{images.thumbnail.url}}"></a>
                  </div>
                  <div class='gOverlay'>
                    <i class="fa fa-heart"></i> {{likes.count}}  &nbsp; <i class="fa fa-comment"></i>  {{comments.count}} 
                  </div>
                </div> 
              {{/each}}
          </div>
        </div>
    </div>
    <div id="blueimp-gallery" class="blueimp-gallery">
        <div class="slides"></div>
        <h3 class="title"></h3>
        <a class="prev">‹</a>
        <a class="next">›</a>
        <a class="close">×</a>
        <a class="play-pause"></a>
        <ol class="indicator"></ol>
    </div>
  </div>
</template> 