<template name='dashboard'>
    {{#if currentUser }}
      {{> profile}}
    {{else}}
      {{> hey}}
    {{/if}}
</template>

<template name='loading'>
  {{> spinner}}
</template>

<template name='slackMessage'>
  <div class='row m-t-sm'>
    <div class='col-md-1'>
        <img alt="logo" height='50' width='50' class="profile-img" src="{{this.thisUser.profile.profile_picture}}">    
    </div>
    <div class='col-md-11'>
      <h5 class='username'>
        @{{this.thisUser.profile.username}}
        <div class='green'></div>
      </h5>
      <br>
      {{text}}
    </div>
  </div>
</template> 

<template name='slackChat'>
  <div class='padding-sm'>
    {{#if thisUser}}
    <div class='chatMessage'>
      <h4>@{{user.profile.username}}</h4>
      <div class='row'>
        <div class='col-md-8'>
          <div class='row m-t-lg'>
            <div class='col-md-3'>
               <img alt="logo" height='100' width='100' class="profile-img" src="{{user.profile.profile_picture}}">
            </div>
            <div class='col-md-9'>
              <h5 class='username'>
                @{{user.profile.username}}
                <div class='green'></div>
              </h5>
              <p>
                 {{user.profile.bio}}
              </p>
              <p>{{user.profile.other.city}}, {{user.profile.other.country}}</p>
            </div>
          </div>
        </div>
      </div> 
        {{> analytics}}
        {{#if growth}}
          <hr>
          {{> valueGrowth}}  
          <hr>    
          {{> followerGrowth}} 
          <hr>
          {{> engagementGrowth}}
        {{/if}}
          <hr>
         {{> gallery}}
    </div>
    {{else}}
    <div class='chatMessage'>
      
      <h4>@{{user.profile.username}} <div class='green'></div></h4>
      <div class='slackMessages'> 
      <h4 class='m-t-lg'>This is your direct message history with @{{user.profile.username}}. Direct messages are private between the two of you.</h4>
      <hr>
      {{#each messages}}
        {{> slackMessage}}
      {{/each}}
      </div>
    </div>    
    {{/if}}
    {{#if thisUser}}
    {{else}}
    <input type='text' class='summerNote'>
    <div class='sendMyMessage'>
      <div class='row'>
        <div class='col-md-6'>
          <p><button class='newBtn clearMessage'>Clear Message</button></p>   
        </div>
        <div class='col-md-6'>
          <p class='text-right'><button class='newBtn sendMessage'>Send Message</button></p>
        </div>
      </div>
    </div>
    {{/if}}
  </div>
</template>  

<template name='profile'>
    <div class='slackList white'>
      <h5>Welcome back @{{currentUser.profile.username}}!</h5>
      <h4 class='m-t-sm'>Messages</h4>
    </div>

    <div class='slackInfo'>
    <div class='searchHeader m-b-sm'>
      <h4>Search</h4>
    </div> 
    <div class='thisProfile'>
      {{#if thisUser}}
      {{else}}
      {{> myStats}}
      {{/if}}
      <p class='m-t-sm'>Post Value: ${{user.data.postValue}}</p>
      <p>Followers: {{user.stats.followed_by}}</p>
      <p>Average Likes: {{user.data.avgLikes}}</p>
      <p>Average Comments: {{user.data.avgComments}}</p>
      <div class='row m-t-md'>
        <div class='col-md-6'>
          {{#if thisUser}}
          <p><a href="/edit"><button class='newBtn'>Update Profile</button></a></p>
          {{else}}
          <p><button class='newBtn moreInfo'>More Info</button></p>
          {{/if}}
        </div>
      </div>
        <div class='analytics hideMe padding-sm'>
          {{> analytics}}
        {{#if growth}}
          <hr>
          {{> valueGrowth}}  
          <hr>    
          {{> followerGrowth}} 
          <hr>
          {{> engagementGrowth}}
        {{/if}}
          <hr>
         {{> gallery}}
        </div>
      </div> 
      <div class='thisSearch hideMe'>
        {{> leaderboard}}
      </div>
    </div>
</template>
 
<template name='myStats'>
  <div class='row'>
    <div class='col-md-3'>
       <img alt="logo" height='100' width='100' class="profile-img" src="{{user.profile_picture}}">
    </div>
    <div class='col-md-9'>
      <h5 class='username'>
        @{{user.username}}
        <div class='green'></div>
      </h5>
      <p>
         {{user.bio}}
      </p>
      <p>{{user.other.city}}, {{user.other.country}}</p>
    </div>
  </div>          
</template> 

<template name='engagementGrowth'>
  <div class="hpanel">
    <div class="stats-title">
      <h4>Engagement</h4>
    </div>
    <br>
    <div class="row">
      <div class="col-md-2 text-center">
        <h3 class=" m-t-sm"><i class="pe-7s-gleam fa-2x"></i></h3>
        <h3 class="">
            {{lastWeek}}
        </h3>
        <small><a href="/faq">current <br> <i class="fa fa-question-circle"></i></a></small>
      </div>
      <div class="col-md-8">
          <div class="text-center small ">
              {{increase}}% change week to week
          </div>
          <div class="flot-chart" style="height: 160px">
              <div class="flot-chart-content" id="engagement-chart"></div>
          </div>
      </div>  
      <div class="col-md-2 text-center">
          <div>
            <h3 class=" m-t-sm"><i class="pe-7s-gleam fa-2x"></i></h3>
            <h3 class="">
                {{today}}
            </h3>
            <small><a href="/faq">last week <br><i class="fa fa-question-circle"></i></a></small>
          </div>
      </div>
    </div> 
  </div> 
</template>

<template name='followerGrowth'> 
  <div class="hpanel">
    <div class="stats-title">
      <h4>Followers</h4>
    </div>
    <br>
    <div class="row">
      <div class="col-md-2 text-center">
        <h3 class=" m-t-sm"><i class="pe-7s-look fa-2x"></i></h3>
        <h3 class="">
            {{lastWeek}}
        </h3>
        <small><a href="/faq">current <br> <i class="fa fa-question-circle"></i></a></small>
      </div>
      <div class="col-md-8">
          <div class="text-center small ">
              {{increase}}% change week to week
          </div>
          <div class="flot-chart" style="height: 160px">
              <div class="flot-chart-content" id="follower-chart"></div>
          </div>
      </div>  
      <div class="col-md-2 text-center">
          <div>
            <h3 class=" m-t-sm"><i class="pe-7s-look fa-2x"></i></h3>
            <h3 class="">
                {{today}}
            </h3>
            <small><a href="/faq">last week <br><i class="fa fa-question-circle"></i></a></small>
          </div>
      </div>
    </div> 
  </div>
</template> 

<template name='valueGrowth'> 
  <div class="hpanel">
    <div class="stats-title">
      <h4>Value</h4>
    </div>
    <br>
    <div class="row">
      <div class="col-md-2 text-center">
        <h3 class=" m-t-sm"><i class="pe-7s-cash fa-2x"></i></h3>
        <h3 class="">
            {{lastWeek}}
        </h3>
        <small><a href="/faq">current <br> <i class="fa fa-question-circle"></i></a></small>
      </div>
      <div class="col-md-8">
          <div class="text-center small ">
              {{increase}}% change week to week
          </div>
          <div class="flot-chart" style="height: 160px">
              <div class="flot-chart-content" id="value-chart"></div>
          </div>
      </div>  
      <div class="col-md-2 text-center">
          <div>
            <h3 class=" m-t-sm"><i class="pe-7s-cash fa-2x"></i></h3>
            <h3 class="">
                {{today}}
            </h3>
            <small><a href="/faq">last week <br><i class="fa fa-question-circle"></i></a></small>
          </div>
      </div>
    </div> 
  </div>
</template>    

<template name='analytics'>
  <div class="hpanel padding-sm">
    <div class="stats-title">
      <h4>Likes and Comments</h4>
    </div>
    <br>
    <div class="row">
      <div class="col-md-12">
          <div class="text-center small ">
              data taken from last 20 posts
          </div>
          <div class="flot-chart" style="height: 160px">
              <div class="flot-chart-content" id="flot-line-chart"></div>
          </div>
      </div>  
    </div> 
  </div>
</template>   

<template name='gallery'>
  <div class="lightBoxGallery">
    {{#each posts}}
      <div class='galleryItem'>
        <div class='gImage'>
            <a href="{{images.standard_resolution.url}}" title="{{caption.text}}" data-gallery=""><img src="{{images.thumbnail.url}}"></a>
        </div>
        <div class='gOverlay {{backColor}} '>
          <i class="fa fa-heart"></i> {{likes.count}}  &nbsp; <i class="fa fa-comment"></i>  {{comments.count}} 
        </div>
      </div> 
    {{/each}}
    <div id="blueimp-gallery" class="blueimp-gallery">
        <div class="slides"></div>
        <h3 class="title"></h3>
        <a class="prev">‹</a>
        <a class="next">›</a>
        <a class="close">×</a>
        <a class="play-pause"></a>
        <ol class="indicator"></ol>
    </div>
  </div>
</template> 